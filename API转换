import os
import json
from bioconvert import Bioconvert

def convert_to_jsonld(input_file, output_file):
    """
    使用 BioConvert 将输入文件转换为 JSON-LD 格式
    """
    # 检查输入文件是否存在
    if not os.path.exists(input_file):
        raise FileNotFoundError(f"输入文件 {input_file} 不存在")

    # 使用 BioConvert 进行格式转换
    try:
        converter = Bioconvert(input_file, output_file)
        converter()
        print(f"文件已成功转换为 {output_file}")
    except Exception as e:
        print(f"转换失败: {e}")

def parse_to_jsonld(input_file, output_file):
    """
    将解析后的文件内容转换为 JSON-LD 格式
    """
    # 示例：将 CSV 文件解析为 JSON-LD
    if input_file.endswith(".csv"):
        with open(input_file, "r") as f:
            lines = f.readlines()
        
        # 简单解析 CSV 文件为 JSON-LD 格式
        jsonld_data = {
            "@context": "http://schema.org",
            "@type": "Dataset",
            "data": [line.strip().split(",") for line in lines]
        }

        # 写入 JSON-LD 文件
        with open(output_file, "w") as f:
            json.dump(jsonld_data, f, indent=4)
        print(f"CSV 文件已成功转换为 JSON-LD 格式: {output_file}")
    else:
        print("当前仅支持 CSV 文件的解析为 JSON-LD")

# 示例调用
if __name__ == "__main__":
    # 输入文件路径
    input_file = "example.csv"  # 替换为实际文件路径
    output_file = "output.jsonld"

    # 转换为 JSON-LD
    parse_to_jsonld(input_file, output_file)
